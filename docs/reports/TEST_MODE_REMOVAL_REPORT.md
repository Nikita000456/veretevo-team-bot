# –û—Ç—á–µ—Ç –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

**–î–∞—Ç–∞:** 28 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

## üéØ –¶–µ–ª—å

–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—É—Ç–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É —Ç–µ—Å—Ç–æ–≤—ã–º –∏ –±–æ–µ–≤—ã–º —Ä–µ–∂–∏–º–∞–º–∏.

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config_veretevo/`)

#### `env.py`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `USE_TEST_BOT`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã (`TELEGRAM_TOKEN_TEST`, `ASSISTANTS_CHAT_ID_TEST`, `FINANCE_CHAT_ID_TEST`)
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±–æ–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `constants.py`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `TASKS_TEST_FILE`
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `TASKS_FILE` –¥–ª—è –±–æ–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

### 2. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (`main.py`)

- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BOT_ENV`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
- ‚ùå –£–¥–∞–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `test_mode` –≤ `bot_data`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º

### 3. –°–µ—Ä–≤–∏—Å—ã (`services_veretevo/`)

#### `task_service.py`
- ‚ùå –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `test_mode` –∏–∑ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –∑–∞–¥–∞—á
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `load_tasks()`, `save_tasks()`, `get_tasks()`, `add_or_update_task()`

#### `enhanced_task_service.py`
- ‚ùå –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `test_mode` –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π `add_comment()`, `get_task_statistics()`, `search_tasks()`

### 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (`handlers_veretevo/`)

#### `tasks.py`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `test_mode`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `test_mode` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏

### 5. –¢–µ—Å—Ç—ã (`tests/`)

#### `test_task_service.py`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –º–æ–∫–∏ `TASKS_TEST_FILE`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `test_mode` –∏–∑ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å –±–æ–µ–≤—ã–º —Ä–µ–∂–∏–º–æ–º

#### `test_handlers_integration.py`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Å `test_mode`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –º–æ–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### `test_performance.py`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `test_mode` –∏ `TASKS_TEST_FILE`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### `test_edge_cases.py`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `test_mode` –∏–∑ –º–æ–∫–æ–≤
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

#### `test_all_handlers.py`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `test_mode` –∏–∑ –º–æ–∫–æ–≤
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 6. –°–∫—Ä–∏–ø—Ç—ã

#### `quick_restart.sh`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `USE_TEST_BOT=0`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BOT_ENV=prod`

#### `run_veretevo.sh`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `USE_TEST_BOT=0`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BOT_ENV=prod`

#### `scripts/todoist_sync_cron.py`
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –∑–∞–¥–∞—á –ø–æ `BOT_ENV`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–æ–µ–≤–æ–π —Ñ–∞–π–ª `tasks.json`

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### `README.md`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `USE_TEST_BOT` –∏ `BOT_ENV`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –æ —Ç–µ—Å—Ç–æ–≤–æ–º –∏ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–∞—Ö
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –±–æ–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
1. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞** ‚Äî —É–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–æ–≤
2. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—É—Ç–∞–Ω–∏—Ü—ã** ‚Äî –±–æ–ª—å—à–µ –Ω–µ—Ç —Ä–∏—Å–∫–∞ –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∏ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º—ã
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** ‚Äî –º–µ–Ω—å—à–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```
VeretevoTeam/
‚îú‚îÄ‚îÄ config_veretevo/
‚îÇ   ‚îú‚îÄ‚îÄ env.py          # –¢–æ–ª—å–∫–æ –±–æ–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ constants.py    # –¢–æ–ª—å–∫–æ –±–æ–µ–≤—ã–µ –ø—É—Ç–∏
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ tasks.json      # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ logs/               # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ –ª–æ–≥–æ–≤
‚îî‚îÄ‚îÄ ...
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
**–î–æ:**
```bash
USE_TEST_BOT=0/1
BOT_ENV=test/prod
TELEGRAM_TOKEN_TEST=...
TELEGRAM_TOKEN=...
```

**–ü–æ—Å–ª–µ:**
```bash
TELEGRAM_TOKEN=...
ASSISTANTS_CHAT_ID=...
FINANCE_CHAT_ID=...
```

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ API —Ñ—É–Ω–∫—Ü–∏–π –æ—Å—Ç–∞–ª—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º (—É–±—Ä–∞–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–¥–µ–ª–∞–º–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –∏–ª–∏ –∫–æ–ø–∏—é –ø—Ä–æ–µ–∫—Ç–∞
2. **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `monkeypatch` –≤ —Ç–µ—Å—Ç–∞—Ö
3. **–î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø—ã `tasks.json`
4. **–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** ‚Äî —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ `logs/`

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞. –ö–æ–¥ —Å—Ç–∞–ª –ø—Ä–æ—â–µ, –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ –º–µ–Ω–µ–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω –æ—à–∏–±–∫–∞–º. –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã ‚Äî –±–æ–µ–≤–æ–π, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –∏ —É–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–µ–∫—Ç–∞. 